<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org" lang="en">
<head>
    <title>Creating</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<h2>Створити оголошення</h2>
<form th:action="@{/create/advert}" th:object="${advert}" method="post"
      enctype="multipart/form-data">
    <div class="form-group">
        <label for="advert-name" class="col-sm-3 control-label">Назва товару</label>
        <div class="col-sm-4">
            <input type="text" id="advert-name" name="name" class="form-control" autofocus>
        </div>
    </div>
    <div class="form-group">
        <label for="category" class="col-sm-3 control-label">Категорія</label>
        <div class="col-sm-4">
            <select id="category" name="category" class="form-select">
                  <span th:each="category : ${categories}">
                    <option th:text="${category.getName()}"
                            th:value="${category.getId()}"></option>
                  </span>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="price" class="col-sm-3 control-label">Ціна</label>
        <div class="col-sm-4">
            <input type="text" id="price" name="price" class="form-control" autofocus>
        </div>
    </div>
    <div class="form-group">
        <label for="city" class="col-sm-3 control-label">Місто</label>
        <div class="col-sm-4">
            <select id="city" name="city" class="form-select">
                  <span th:each="city : ${cities}">
                    <option th:text="${city.getName()}"
                            th:value="${city.getId()}"></option>
                  </span>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="phone" class="col-sm-3 control-label">Телефон</label>
        <div class="col-sm-4">
            <input type="number" id="phone" name="phone" class="form-control" autofocus>
        </div>
    </div>
    <div class="mb-3">
        <label for="image" class="form-label">Multiple files input example</label>
        <input type="file" multiple id="image" name="image">
    </div>
    <div id="preview"></div>
    <div class="mt-4 pt-2">
        <input type="submit" class="btn btn-success" value="Зберегти"/>
        <input type="reset" class="btn btn-danger" value="Очистити"/>
    </div>
    <script>
        function previewImages() {

            var $preview = $('#preview').empty();
            if (this.files) $.each(this.files, readAndPreview);

            function readAndPreview(i, file) {

                if (!/\.(jpe?g|png|gif)$/i.test(file.name)) {
                    return alert(file.name + " is not an image");
                }

                var reader = new FileReader();

                $(reader).on("load", function () {
                    $preview.append($("<img/>", {src: this.result, height: 100}));
                });
                reader.readAsDataURL(file);
            }
        }

        $('#image').on("change", previewImages);
    </script>
</form>
</body>
</html>